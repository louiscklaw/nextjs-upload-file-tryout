"use strict";(self.webpackChunkappcircle_docusaurus=self.webpackChunkappcircle_docusaurus||[]).push([[8191],{2184:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>u,toc:()=>d});var t=n(74848),a=n(28453),s=n(11470),l=n(19365);const i={title:"Upgrading Runner",description:"Learn how to upgrade self-hosted runner in Appcircle",tags:["self-hosted runner","update","upgrade"],sidebar_position:3},o="Update Self-hosted Runner",u={id:"self-hosted-appcircle/self-hosted-runner/update",title:"Upgrading Runner",description:"Learn how to upgrade self-hosted runner in Appcircle",source:"@site/docs/self-hosted-appcircle/self-hosted-runner/update.md",sourceDirName:"self-hosted-appcircle/self-hosted-runner",slug:"/self-hosted-appcircle/self-hosted-runner/update",permalink:"/nextjs-upload-file-tryout/self-hosted-appcircle/self-hosted-runner/update",draft:!1,unlisted:!1,editUrl:"https://github.com/appcircleio/appcircle-docusaurus/tree/master/docs/self-hosted-appcircle/self-hosted-runner/update.md",tags:[{label:"self-hosted runner",permalink:"/nextjs-upload-file-tryout/tags/self-hosted-runner"},{label:"update",permalink:"/nextjs-upload-file-tryout/tags/update"},{label:"upgrade",permalink:"/nextjs-upload-file-tryout/tags/upgrade"}],version:"current",sidebarPosition:3,frontMatter:{title:"Upgrading Runner",description:"Learn how to upgrade self-hosted runner in Appcircle",tags:["self-hosted runner","update","upgrade"],sidebar_position:3},sidebar:"mySidebar",previous:{title:"Self-signed Certificates",permalink:"/nextjs-upload-file-tryout/self-hosted-appcircle/self-hosted-runner/configure-runner/custom-certificates"},next:{title:"Cloud Providers",permalink:"/nextjs-upload-file-tryout/self-hosted-appcircle/self-hosted-runner/cloud-providers/"}},c={},d=[{value:"1. Update Runner",id:"1-update-runner",level:2},{value:"2. Reconfigure Runner",id:"2-reconfigure-runner",level:2},{value:"3. Reinstall Service",id:"3-reinstall-service",level:2}];function p(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h1,{id:"update-self-hosted-runner",children:"Update Self-hosted Runner"}),"\n",(0,t.jsx)(r.p,{children:"When a new version of self-hosted runner is released, you can update runner with below steps."}),"\n",(0,t.jsx)(r.h2,{id:"1-update-runner",children:"1. Update Runner"}),"\n",(0,t.jsx)(r.p,{children:"Download and extract the latest self-hosted runner package."}),"\n",(0,t.jsxs)(s.A,{children:[(0,t.jsxs)(l.A,{value:"osx-arm64",label:"macOS arm64",default:!0,children:[(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"curl -O -L https://cdn.appcircle.io/self-hosted/runner/appcircle-runner-osx-arm64-1.6.0.zip\n"})}),(0,t.jsx)(r.p,{children:"Extract self-hosted runner package."}),(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"unzip -o -u appcircle-runner-osx-arm64-1.6.0.zip\n"})})]}),(0,t.jsxs)(l.A,{value:"osx-x64",label:"macOS x64",children:[(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"curl -O -L https://cdn.appcircle.io/self-hosted/runner/appcircle-runner-osx-x64-1.6.0.zip\n"})}),(0,t.jsx)(r.p,{children:"Extract self-hosted runner package."}),(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"unzip -o -u appcircle-runner-osx-x64-1.6.0.zip\n"})})]}),(0,t.jsxs)(l.A,{value:"linux-x64",label:"Linux x64",children:[(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"curl -O -L https://cdn.appcircle.io/self-hosted/runner/appcircle-runner-linux-x64-1.6.0.zip\n"})}),(0,t.jsx)(r.p,{children:"Extract self-hosted runner package."}),(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"unzip -o -u appcircle-runner-linux-x64-1.6.0.zip\n"})})]})]}),"\n",(0,t.jsxs)(r.p,{children:["Change directory into extracted ",(0,t.jsx)(r.code,{children:"appcircle-runner"})," folder for following steps."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"cd appcircle-runner\n"})}),"\n",(0,t.jsx)(r.h2,{id:"2-reconfigure-runner",children:"2. Reconfigure Runner"}),"\n",(0,t.jsx)(r.p,{children:"Self-hosted runner updates may include tool upgrades or introduce new required tools for build pipeline. So we need to rerun configuration step same as before. It will check installed tools quickly, and will update only required tools."}),"\n",(0,t.jsxs)(r.p,{children:["To remember what configuration step was, please refer to ",(0,t.jsx)(r.a,{href:"./installation#3-configure",children:"this"})," page."]}),"\n",(0,t.jsx)(r.h2,{id:"3-reinstall-service",children:"3. Reinstall Service"}),"\n",(0,t.jsx)(r.p,{children:"Although we change self-hosted runner files with above steps, we need to restart runner service in order to activate latest updates."}),"\n",(0,t.jsx)(r.p,{children:"Some updates may also contain systemd or launchd service updates. For this reason, on every update, reinstalling service is suggested."}),"\n",(0,t.jsx)(r.p,{children:"Reinstalling service also contains runner restart operations and doesn't affect self-hosted runner logs or produced artifacts."}),"\n",(0,t.jsx)(r.p,{children:"In order to reinstall systemd or launchd service, first uninstall and then install service with below commands."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"./ac-runner service -c uninstall\n"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"./ac-runner service -c install\n"})}),"\n",(0,t.jsxs)(r.admonition,{type:"info",children:[(0,t.jsxs)(r.p,{children:["When you complete update successfully, you will see updated ",(0,t.jsx)(r.strong,{children:"version"}),' in "Self-hosted Runners" list in ',(0,t.jsx)(r.a,{href:"./configure-runner/manage-runners#monitoring-self-hosted-runners",children:"here"}),"."]}),(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"./ac-runner --version\n"})})]})]})}function h(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},19365:(e,r,n)=>{n.d(r,{A:()=>l});n(96540);var t=n(18215);const a={tabItem:"tabItem_Ymn6"};var s=n(74848);function l(e){let{children:r,hidden:n,className:l}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,t.A)(a.tabItem,l),hidden:n,children:r})}},11470:(e,r,n)=>{n.d(r,{A:()=>w});var t=n(96540),a=n(18215),s=n(23104),l=n(56347),i=n(205),o=n(57485),u=n(31682),c=n(89466);function d(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:r}=e;return!!r&&"object"==typeof r&&"value"in r}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:r,children:n}=e;return(0,t.useMemo)((()=>{const e=r??function(e){return d(e).map((e=>{let{props:{value:r,label:n,attributes:t,default:a}}=e;return{value:r,label:n,attributes:t,default:a}}))}(n);return function(e){const r=(0,u.X)(e,((e,r)=>e.value===r.value));if(r.length>0)throw new Error(`Docusaurus error: Duplicate values "${r.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[r,n])}function h(e){let{value:r,tabValues:n}=e;return n.some((e=>e.value===r))}function f(e){let{queryString:r=!1,groupId:n}=e;const a=(0,l.W6)(),s=function(e){let{queryString:r=!1,groupId:n}=e;if("string"==typeof r)return r;if(!1===r)return null;if(!0===r&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:r,groupId:n});return[(0,o.aZ)(s),(0,t.useCallback)((e=>{if(!s)return;const r=new URLSearchParams(a.location.search);r.set(s,e),a.replace({...a.location,search:r.toString()})}),[s,a])]}function m(e){const{defaultValue:r,queryString:n=!1,groupId:a}=e,s=p(e),[l,o]=(0,t.useState)((()=>function(e){let{defaultValue:r,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(r){if(!h({value:r,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${r}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return r}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:r,tabValues:s}))),[u,d]=f({queryString:n,groupId:a}),[m,g]=function(e){let{groupId:r}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(r),[a,s]=(0,c.Dv)(n);return[a,(0,t.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:a}),x=(()=>{const e=u??m;return h({value:e,tabValues:s})?e:null})();(0,i.A)((()=>{x&&o(x)}),[x]);return{selectedValue:l,selectValue:(0,t.useCallback)((e=>{if(!h({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),g(e)}),[d,g,s]),tabValues:s}}var g=n(92303);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=n(74848);function v(e){let{className:r,block:n,selectedValue:t,selectValue:l,tabValues:i}=e;const o=[],{blockElementScrollPositionUntilNextRender:u}=(0,s.a_)(),c=e=>{const r=e.currentTarget,n=o.indexOf(r),a=i[n].value;a!==t&&(u(r),l(a))},d=e=>{let r=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=o.indexOf(e.currentTarget)+1;r=o[n]??o[0];break}case"ArrowLeft":{const n=o.indexOf(e.currentTarget)-1;r=o[n]??o[o.length-1];break}}r?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":n},r),children:i.map((e=>{let{value:r,label:n,attributes:s}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:t===r?0:-1,"aria-selected":t===r,ref:e=>o.push(e),onKeyDown:d,onClick:c,...s,className:(0,a.A)("tabs__item",x.tabItem,s?.className,{"tabs__item--active":t===r}),children:n??r},r)}))})}function j(e){let{lazy:r,children:n,selectedValue:a}=e;const s=(Array.isArray(n)?n:[n]).filter(Boolean);if(r){const e=s.find((e=>e.props.value===a));return e?(0,t.cloneElement)(e,{className:"margin-top--md"}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:s.map(((e,r)=>(0,t.cloneElement)(e,{key:r,hidden:e.props.value!==a})))})}function y(e){const r=m(e);return(0,b.jsxs)("div",{className:(0,a.A)("tabs-container",x.tabList),children:[(0,b.jsx)(v,{...e,...r}),(0,b.jsx)(j,{...e,...r})]})}function w(e){const r=(0,g.A)();return(0,b.jsx)(y,{...e,children:d(e.children)},String(r))}},28453:(e,r,n)=>{n.d(r,{R:()=>l,x:()=>i});var t=n(96540);const a={},s=t.createContext(a);function l(e){const r=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);