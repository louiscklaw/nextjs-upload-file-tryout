"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[3308],{42116:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>l});var s=i(74848),t=i(28453);const r={title:"SSL Configuration",description:"Learn how to configure SSL for your self-hosted Appcircle server",tags:["self-hosted","ssl","https","certificate","custom domain","enterprise app store","external services"],sidebar_position:3},o="Overview",c={id:"self-hosted-appcircle/configure-server/integrations-and-access/ssl-configuration",title:"SSL Configuration",description:"Learn how to configure SSL for your self-hosted Appcircle server",source:"@site/docs/self-hosted-appcircle/configure-server/integrations-and-access/ssl-configuration.md",sourceDirName:"self-hosted-appcircle/configure-server/integrations-and-access",slug:"/self-hosted-appcircle/configure-server/integrations-and-access/ssl-configuration",permalink:"/nextjs-upload-file-tryout/self-hosted-appcircle/configure-server/integrations-and-access/ssl-configuration",draft:!1,unlisted:!1,editUrl:"https://github.com/appcircleio/appcircle-docusaurus/tree/master/docs/self-hosted-appcircle/configure-server/integrations-and-access/ssl-configuration.md",tags:[{label:"self-hosted",permalink:"/nextjs-upload-file-tryout/tags/self-hosted"},{label:"ssl",permalink:"/nextjs-upload-file-tryout/tags/ssl"},{label:"https",permalink:"/nextjs-upload-file-tryout/tags/https"},{label:"certificate",permalink:"/nextjs-upload-file-tryout/tags/certificate"},{label:"custom domain",permalink:"/nextjs-upload-file-tryout/tags/custom-domain"},{label:"enterprise app store",permalink:"/nextjs-upload-file-tryout/tags/enterprise-app-store"},{label:"external services",permalink:"/nextjs-upload-file-tryout/tags/external-services"}],version:"current",sidebarPosition:3,frontMatter:{title:"SSL Configuration",description:"Learn how to configure SSL for your self-hosted Appcircle server",tags:["self-hosted","ssl","https","certificate","custom domain","enterprise app store","external services"],sidebar_position:3},sidebar:"mySidebar",previous:{title:"Integrations",permalink:"/nextjs-upload-file-tryout/self-hosted-appcircle/configure-server/integrations-and-access/integration"},next:{title:"Network Access",permalink:"/nextjs-upload-file-tryout/self-hosted-appcircle/configure-server/integrations-and-access/network-access"}},a={},l=[{value:"Configure HTTPS",id:"configure-https",level:2},{value:"Sample Configuration",id:"sample-configuration",level:3},{value:"Redirect HTTP requests to HTTPS",id:"redirect-http-requests-to-https",level:4},{value:"Enterprise App Store",id:"enterprise-app-store",level:2},{value:"Default Domain",id:"default-domain",level:3},{value:"Custom Domain",id:"custom-domain",level:3},{value:"Testing Distribution",id:"testing-distribution",level:2},{value:"Default Domain",id:"default-domain-1",level:3},{value:"Custom Domain",id:"custom-domain-1",level:3},{value:"External Services",id:"external-services",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["Although auto-generated ",(0,s.jsx)(n.code,{children:"global.yaml"}),' template has "HTTPS enabled" by default, in our sample scenario and configuration it was "HTTPS disabled" to keep it simple to understand. Refer ',(0,s.jsx)(n.a,{href:"/self-hosted-appcircle/install-server/docker#3-configure",children:"here"})," for sample configuration told at installation."]}),"\n",(0,s.jsx)(n.p,{children:"SSL configuration has some specific details for its own use cases and it should have a dedicated section."}),"\n",(0,s.jsx)(n.p,{children:"So, in this section we will document all the details about configuring HTTPS with your own certificates for your own domain."}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"Self-hosted Appcircle server does not support using a proxy, load balancer or some other external device to terminate SSL. You should do it inside Appcircle instance with configuration told in below sections."})}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsx)(n.p,{children:"For now, self-hosted Appcircle server does not have Let\u2019s Encrypt integration or an automated way of renewing certificates."}),(0,s.jsx)(n.p,{children:"You should manage certificates from configuration file manually and renew them with same method when expired."})]}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsxs)(n.p,{children:["If your cert format ",(0,s.jsx)(n.code,{children:"PKCS#7"})," (known as p7b or p7c) , you can convert it to pem format with openssl."]}),(0,s.jsx)(n.p,{children:"See the example command below:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"openssl pkcs7 -print_certs -in cert.p7b -out cert.pem\n"})})]}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsxs)(n.p,{children:["If your cert format is ",(0,s.jsx)(n.code,{children:"PFX"})," (known as p12), you can convert it to pem format with openssl."]}),(0,s.jsx)(n.p,{children:"See the example commands below:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Extract the cert from archive."}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"openssl pkcs12 -in cert.p12 -clcerts -nokeys -out cert.pem\n"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Extract the key without password."}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"openssl pkcs12 -in cert.p12 -nocerts -nodes -out key.pem\n"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Extract the key with password."}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"openssl pkcs12 -in cert.p12 -nocerts -out key.pem\n"})})]}),"\n",(0,s.jsx)(n.h2,{id:"configure-https",children:"Configure HTTPS"}),"\n",(0,s.jsxs)(n.p,{children:["First of all, you need to set ",(0,s.jsx)(n.code,{children:"external.scheme"})," as ",(0,s.jsx)(n.code,{children:"https"})," at ",(0,s.jsx)(n.code,{children:"global.yaml"})," to enable HTTPS for all ",(0,s.jsx)(n.a,{href:"/self-hosted-appcircle/install-server/docker#4-dns-settings",children:"subdomains"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"external:\n  scheme: https\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"caution",children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"global.yaml"})," configuration file is located under ",(0,s.jsx)(n.strong,{children:"project"})," folder."]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"projects/${YOUR_PROJECT}"})}),"\n"]}),(0,s.jsxs)(n.p,{children:["You can see an example project configuration from ",(0,s.jsx)(n.a,{href:"/self-hosted-appcircle/install-server/docker#3-configure",children:"here"}),"."]})]}),"\n",(0,s.jsxs)(n.admonition,{type:"caution",children:[(0,s.jsxs)(n.p,{children:["Changing ",(0,s.jsx)(n.code,{children:"external.scheme"})," from ",(0,s.jsx)(n.code,{children:"http"})," to ",(0,s.jsx)(n.code,{children:"https"})," or from ",(0,s.jsx)(n.code,{children:"https"})," to ",(0,s.jsx)(n.code,{children:"http"})," after using Appcircle server some time, requires configuration reset which results with data cleanup."]}),(0,s.jsx)(n.p,{children:"So, we suggest you to be sure with your configuration before using it in production environment."}),(0,s.jsxs)(n.p,{children:["Refer to ",(0,s.jsx)(n.a,{href:"/self-hosted-appcircle/install-server/docker#reset-configuration",children:"reset configuration"})," section for more details."]})]}),"\n",(0,s.jsxs)(n.p,{children:["Set your private key and public certificate to ",(0,s.jsx)(n.code,{children:"nginx"})," environment variables in ",(0,s.jsx)(n.code,{children:"global.yaml"})," as below."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"nginx:\n  sslCertificate: |\n    -----BEGIN CERTIFICATE-----\n    MIIFLTCCBBWgAwIBAgISBB5v1NxtkwmxzOryHdHkWuwoMA0GCSqGSIb3DQEBCwUA\n    MDIxCzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1MZXQncyBFbmNyeXB0MQswCQYDVQQD\n...\n    Dfvp7OOGAN6dEOM4+qR9sdjoSYKEBpsr6GtPAQw4dy753ec5\n    -----END CERTIFICATE-----\n  sslCertificateKey: |\n    -----BEGIN PRIVATE KEY-----\n    MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDWkSbzuxqDY9hb\n    giZbOvH6ZEWJNgk5x+jsocsH+f2nsi6IsmnZqm5z068IxV4o7u2NtPQ1Yl4v4F7y\n...\n    J8lYxh0PCOmuCZ02FAvoi0r8\n    -----END PRIVATE KEY-----\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"sslCertificate"})," is the public certificate. (content of ",(0,s.jsx)(n.code,{children:".crt"})," file)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"sslCertificateKey"})," is the private key. (content of ",(0,s.jsx)(n.code,{children:".key"})," file)"]}),"\n"]}),"\n",(0,s.jsxs)(n.admonition,{type:"caution",children:[(0,s.jsxs)(n.p,{children:["You must use the full certificate chain, in the correct order, to prevent SSL errors when clients connect. For example, you may get an ",(0,s.jsx)(n.em,{children:'"unable to verify the first certificate"'})," error on a missing case."]}),(0,s.jsx)(n.p,{children:"Order should be like this: first the server certificate, then all intermediate certificates, and finally the root CA."})]}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsxs)(n.p,{children:["If you want to hide these secrets from human-readable ",(0,s.jsx)(n.code,{children:"global.yaml"}),", you can use base64 encoded ",(0,s.jsx)(n.code,{children:"user-secret"})," file for the same environment variables."]}),(0,s.jsxs)(n.p,{children:["Refer to ",(0,s.jsx)(n.a,{href:"/self-hosted-appcircle/install-server/docker#3-configure",children:"installation"})," docs for details of ",(0,s.jsx)(n.code,{children:"user-secret"})," usage."]})]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"For now, self-hosted Appcircle does not support usage of password protected private keys."})}),"\n",(0,s.jsx)(n.h3,{id:"sample-configuration",children:"Sample Configuration"}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsxs)(n.p,{children:["We're assuming that previously you reviewed or followed ",(0,s.jsx)(n.a,{href:"/self-hosted-appcircle/install-server/docker#3-configure",children:"install self-hosted appcircle"})," section in docs and applied example scenario."]}),(0,s.jsx)(n.p,{children:"Following steps are using example project as project naming, which was told there."}),(0,s.jsxs)(n.p,{children:["Current working directory is assumed ",(0,s.jsx)(n.code,{children:"appcircle-server"})," for following steps. See ",(0,s.jsx)(n.a,{href:"/self-hosted-appcircle/install-server/docker#1-download",children:"here"})," for installation details."]})]}),"\n",(0,s.jsxs)(n.p,{children:["Let's assume we have ",(0,s.jsx)(n.code,{children:"_wildcard.appcircle.spacetech.com.key"})," as private key file for our sample domain."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ cat _wildcard.appcircle.spacetech.com.key\n-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDWkSbzuxqDY9hb\ngiZbOvH6ZEWJNgk5x+jsocsH+f2nsi6IsmnZqm5z068IxV4o7u2NtPQ1Yl4v4F7y\n...\nJ8lYxh0PCOmuCZ02FAvoi0r8\n-----END PRIVATE KEY-----\n"})}),"\n",(0,s.jsxs)(n.p,{children:["And we have ",(0,s.jsx)(n.code,{children:"_wildcard.appcircle.spacetech.com.crt"})," as public certificate file for our sample domain. It's a full chain certificate file which has server certificate, all intermediate certificates, and finally the root CA."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ cat _wildcard.appcircle.spacetech.com.crt\n-----BEGIN CERTIFICATE-----\nMIIFLTCCBBWgAwIBAgISBB5v1NxtkwmxzOryHdHkWuwoMA0GCSqGSIb3DQEBCwUA\nMDIxCzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1MZXQncyBFbmNyeXB0MQswCQYDVQQD\n...\nhXg7TJ+Y8MmrBmw4il+i4GfwZN4h7TMuRm17w9+EfVgw\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIFFjCCAv6gAwIBAgIRAJErCErPDBinU/bWLiWnX1owDQYJKoZIhvcNAQELBQAw\nTzELMAkGA1UEBhMCVVMxKTAnBgNVBAoTIEludGVybmV0IFNlY3VyaXR5IFJlc2Vh\n...\nnLRbwHOoq7hHwg==\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIFYDCCBEigAwIBAgIQQAF3ITfU6UK47naqPGQKtzANBgkqhkiG9w0BAQsFADA/\nMSQwIgYDVQQKExtEaWdpdGFsIFNpZ25hdHVyZSBUcnVzdCBDby4xFzAVBgNVBAMT\n...\nDfvp7OOGAN6dEOM4+qR9sdjoSYKEBpsr6GtPAQw4dy753ec5\n-----END CERTIFICATE-----\n"})}),"\n",(0,s.jsxs)(n.p,{children:["HTTPS related settings in ",(0,s.jsx)(n.code,{children:"global.yaml"})," file should be like this."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'---\nenvironment: Production\nenableErrorHandling: "true"\nexternal:\n  scheme: https\n  mainDomain: ".appcircle.spacetech.com"\n...\n...\nnginx:\n  sslCertificate: |\n    -----BEGIN CERTIFICATE-----\n    MIIFLTCCBBWgAwIBAgISBB5v1NxtkwmxzOryHdHkWuwoMA0GCSqGSIb3DQEBCwUA\n    MDIxCzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1MZXQncyBFbmNyeXB0MQswCQYDVQQD\n...\n    hXg7TJ+Y8MmrBmw4il+i4GfwZN4h7TMuRm17w9+EfVgw\n    -----END CERTIFICATE-----\n    -----BEGIN CERTIFICATE-----\n    MIIFFjCCAv6gAwIBAgIRAJErCErPDBinU/bWLiWnX1owDQYJKoZIhvcNAQELBQAw\n    TzELMAkGA1UEBhMCVVMxKTAnBgNVBAoTIEludGVybmV0IFNlY3VyaXR5IFJlc2Vh\n...\n    nLRbwHOoq7hHwg==\n    -----END CERTIFICATE-----\n    -----BEGIN CERTIFICATE-----\n    MIIFYDCCBEigAwIBAgIQQAF3ITfU6UK47naqPGQKtzANBgkqhkiG9w0BAQsFADA/\n    MSQwIgYDVQQKExtEaWdpdGFsIFNpZ25hdHVyZSBUcnVzdCBDby4xFzAVBgNVBAMT\n...\n    Dfvp7OOGAN6dEOM4+qR9sdjoSYKEBpsr6GtPAQw4dy753ec5\n    -----END CERTIFICATE-----\n  sslCertificateKey: |\n    -----BEGIN PRIVATE KEY-----\n    MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDWkSbzuxqDY9hb\n    giZbOvH6ZEWJNgk5x+jsocsH+f2nsi6IsmnZqm5z068IxV4o7u2NtPQ1Yl4v4F7y\n...\n    J8lYxh0PCOmuCZ02FAvoi0r8\n    -----END PRIVATE KEY-----\n'})}),"\n",(0,s.jsxs)(n.p,{children:["After running server, open your browser and go to ",(0,s.jsx)(n.code,{children:"https://my.appcircle.spacetech.com"}),"."]}),"\n",(0,s.jsx)(n.p,{children:'You should see "Connection Secure" icon in browser\'s address bar which shows successful HTTPS connection.'}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsx)(n.h4,{id:"redirect-http-requests-to-https",children:"Redirect HTTP requests to HTTPS"}),(0,s.jsxs)(n.p,{children:["By default, when you enable HTTPS for ",(0,s.jsx)(n.code,{children:"external.scheme"}),", NGINX listens for unencrypted HTTP traffic on port 80 but redirects them as HTTPS with 301 response code automatically."]}),(0,s.jsx)(n.p,{children:"You don't need to do any manual configuration to redirect HTTP requests to HTTPS."})]}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsxs)(n.p,{children:["In order to keep your configuration simple, we're suggesting to use wildcard certificate for ",(0,s.jsx)(n.code,{children:"external.mainDomain"}),"."]}),(0,s.jsxs)(n.p,{children:["For our sample scenario, we used certificate signed for ",(0,s.jsx)(n.code,{children:"*.appcircle.spacetech.com"})," domain."]}),(0,s.jsxs)(n.p,{children:["Wildcard certificate created for main domain will cover all subdomains listed in ",(0,s.jsx)(n.a,{href:"/self-hosted-appcircle/install-server/docker#4-dns-settings",children:"here"}),"."]}),(0,s.jsx)(n.p,{children:"Although you can create and use dedicated certificates for all subdomains, in our opinion it won't be useful. It will be harder to configure and maintain lots of certificates."})]}),"\n",(0,s.jsx)(n.h2,{id:"enterprise-app-store",children:"Enterprise App Store"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"global.yaml"})," configuration has its own dedicated section for Enterprise App Store domain settings. Below we will explain some use cases for Enterprise App Store, when you enable HTTPS."]}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsx)(n.p,{children:'After installation, you can view domain settings from "Enterprise App Store > Settings > Store Domain" page in web UI. But you can not change settings from there.'}),(0,s.jsxs)(n.p,{children:["If you want to change domain settings, you should take the same steps told below and make changes from ",(0,s.jsx)(n.code,{children:"global.yaml"}),"."]})]}),"\n",(0,s.jsx)(n.h3,{id:"default-domain",children:"Default Domain"}),"\n",(0,s.jsx)(n.p,{children:"You can use Enterprise App Store with its default domain without any custom domain configuration."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"global.yaml"})," section should be like this for default domain."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"storeWeb:\n  external:\n    subdomain: store\n  customDomain:\n    enabled: false\n"})}),"\n",(0,s.jsx)(n.p,{children:"When you use wildcard certificate for main domain, you don't need to create an extra certificate for enterprise app store domain."}),"\n",(0,s.jsx)(n.p,{children:'Although your wildcard certificate does not include "Store Prefix", on self-hosted Appcircle server installations "Store Prefix" is not used actively since there is only one organization.'}),"\n",(0,s.jsx)(n.p,{children:"Prefixed web requests will always be redirected to default store subdomain. And store subdomain is covered by your wildcard certificate."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"${PREFIX}.store"})," ","\u27a1\ufe0f"," ",(0,s.jsx)(n.code,{children:"store"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"For our sample scenario, an example redirection will be like this,"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"5bgnsirt10fj.store.appcircle.spacetech.com"})," ","\u27a1\ufe0f"," ",(0,s.jsx)(n.code,{children:"store.appcircle.spacetech.com"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["For this reason, you can only use ",(0,s.jsx)(n.code,{children:"store.appcircle.spacetech.com"})," for all your needs."]}),"\n",(0,s.jsx)(n.h3,{id:"custom-domain",children:"Custom Domain"}),"\n",(0,s.jsx)(n.p,{children:"It's possible to use a custom domain for the Enterprise App Store. In this case we need to make extra configuration for our custom domain."}),"\n",(0,s.jsx)(n.p,{children:"Most likely, our custom domain won't be covered by main domain certificate. So we may need to create new public certificate and private key pair for the custom domain."}),"\n",(0,s.jsx)(n.p,{children:"Custom domain HTTPS settings are similar to main domain conceptually. After enabling HTTPS for main domain, it won't be hard to enable HTTPS for Enterprise App Store custom domain."}),"\n",(0,s.jsxs)(n.p,{children:["Let's assume we want to use ",(0,s.jsx)(n.code,{children:"apps.spacetech.com"})," as custom domain for our sample scenario."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"global.yaml"})," section should be like this for this case."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"storeWeb:\n  external:\n    subdomain: store\n  customDomain:\n    enabled: true\n    domain: apps.spacetech.com\n    port: 443\n    enabledTls: true\n    publicKey: |\n      -----BEGIN CERTIFICATE-----\n      MIIFOjCCBCKgAwIBAgISBAqWQRxIkc0kW2OZsPY2qH4dMA0GCSqGSIb3DQEBCwUA\n      MDIxCzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1MZXQncyBFbmNyeXB0MQswCQYDVQQD\n...\n      fLDoKQyylhH5aZgQvRWmvGjAvMCaU4me6rfq7ExudsrImuHZuxv0+mL1OvHsJA==\n      -----END CERTIFICATE-----\n      -----BEGIN CERTIFICATE-----\n      MIIFFjCCAv6gAwIBAgIRAJErCErPDBinU/bWLiWnX1owDQYJKoZIhvcNAQELBQAw\n      TzELMAkGA1UEBhMCVVMxKTAnBgNVBAoTIEludGVybmV0IFNlY3VyaXR5IFJlc2Vh\n...\n      nLRbwHOoq7hHwg==\n      -----END CERTIFICATE-----\n      -----BEGIN CERTIFICATE-----\n      MIIFYDCCBEigAwIBAgIQQAF3ITfU6UK47naqPGQKtzANBgkqhkiG9w0BAQsFADA/\n      MSQwIgYDVQQKExtEaWdpdGFsIFNpZ25hdHVyZSBUcnVzdCBDby4xFzAVBgNVBAMT\n...\n      Dfvp7OOGAN6dEOM4+qR9sdjoSYKEBpsr6GtPAQw4dy753ec5\n      -----END CERTIFICATE-----\n    privateKey: |\n      -----BEGIN PRIVATE KEY-----\n      MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDL0BJ4P5hBrjIf\n      uDOL6OsB3AvdwTIwCTfpaJOSRi1ZXbxVGXv2f429gqQ4WADxRnLIsmcZtbAyrubO\n...\n      LUBOU4QRP9V6qpS0TrLmIoM=\n      -----END PRIVATE KEY-----\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"publicKey"})," is the public certificate. (content of ",(0,s.jsx)(n.code,{children:".crt"})," file)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"privateKey"})," is the private key. (content of ",(0,s.jsx)(n.code,{children:".key"})," file)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["You should use the full certificate chain for ",(0,s.jsx)(n.code,{children:"publicKey"})," similar to main domain ",(0,s.jsx)(n.code,{children:"sslCertificate"}),", to prevent SSL errors when clients connect."]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"For now, self-hosted Appcircle does not support usage of password protected private keys for Enterprise App Store custom domains."})}),"\n",(0,s.jsx)(n.h2,{id:"testing-distribution",children:"Testing Distribution"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"global.yaml"})," configuration has its own dedicated section for ",(0,s.jsx)(n.a,{href:"/distribute",children:"Testing Distribution"})," domain settings. Below, we will explain some use cases for Testing Distribution, when you enable HTTPS."]}),"\n",(0,s.jsx)(n.h3,{id:"default-domain-1",children:"Default Domain"}),"\n",(0,s.jsxs)(n.p,{children:["By default, Testing Distribution has a ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://docs.appcircle.io/self-hosted-appcircle/install-server/docker#4-dns-settings",children:"dist"})})," subdomain under the main domain on self-hosted Appcircle servers."]}),"\n",(0,s.jsxs)(n.p,{children:["For example, if your ",(0,s.jsx)(n.code,{children:"external.mainDomain"})," in the ",(0,s.jsx)(n.code,{children:"global.yaml"})," file is ",(0,s.jsx)(n.code,{children:".appcircle.spacetech.com"}),", then the default Testing Distribution domain name should be ",(0,s.jsx)(n.code,{children:"dist.appcircle.spacetech.com"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["If you have configured the Appcircle server as HTTPS using the ",(0,s.jsx)(n.code,{children:"external.scheme"})," as explained ",(0,s.jsx)(n.a,{href:"#configure-https",children:"here"}),", the certificate of the Appcircle server also includes the default Testing Distribution subdomain, and it works with HTTPS."]}),"\n",(0,s.jsx)(n.h3,{id:"custom-domain-1",children:"Custom Domain"}),"\n",(0,s.jsx)(n.p,{children:"It's possible to use a custom domain for the Testing Distribution. In this case, you need to make extra configurations for our custom domain."}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.p,{children:["Please be aware that, after you change the Testing Distribution domain or the SSL settings, the links in the ",(0,s.jsx)(n.strong,{children:"emails that were sent to the testers with the previous domain and previous SSL settings will be invalid."})]})}),"\n",(0,s.jsx)(n.p,{children:"Most likely, our custom domain won't be covered by the main domain certificate. In this case, we need to create a new public certificate and private key pair for the custom domain."}),"\n",(0,s.jsx)(n.p,{children:"Custom domain HTTPS settings are similar to the main domain configuration conceptually. After enabling HTTPS for the main domain, it won't be hard to enable HTTPS for the Testing Distribution custom domain."}),"\n",(0,s.jsxs)(n.p,{children:["Let's assume we want to use ",(0,s.jsx)(n.code,{children:"dist.spacetech.com"})," as a custom domain for our sample scenario. Then the ",(0,s.jsx)(n.code,{children:"global.yaml"})," section should be like below for this case."]}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsxs)(n.p,{children:["If you don't have the ",(0,s.jsx)(n.code,{children:"testerWeb"})," section defined in the ",(0,s.jsx)(n.code,{children:"global.yaml"}),"\xa0file, you should add it as below."]}),(0,s.jsxs)(n.p,{children:["If you have a ",(0,s.jsx)(n.code,{children:"testerWeb"})," section previously defined in the ",(0,s.jsx)(n.code,{children:"global.yaml"})," file for some reason, you should update that section with the ",(0,s.jsx)(n.code,{children:"customDomain"})," settings below instead of adding a new one."]})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"testerWeb:\n  customDomain:\n    enabled: true\n    domain: dist.spacetech.com\n    port: 443\n    enabledTls: true\n    publicKey: |\n      -----BEGIN CERTIFICATE-----\n      MIIFOjCCBCKgAwIBAgISBAqWQRxIkc0kW2OZsPY2qH4dMA0GCSqGSIb3DQEBCwUA\n      MDIxCzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1MZXQncyBFbmNyeXB0MQswCQYDVQQD\n...\n      fLDoKQyylhH5aZgQvRWmvGjAvMCaU4me6rfq7ExudsrImuHZuxv0+mL1OvHsJA==\n      -----END CERTIFICATE-----\n      -----BEGIN CERTIFICATE-----\n      MIIFFjCCAv6gAwIBAgIRAJErCErPDBinU/bWLiWnX1owDQYJKoZIhvcNAQELBQAw\n      TzELMAkGA1UEBhMCVVMxKTAnBgNVBAoTIEludGVybmV0IFNlY3VyaXR5IFJlc2Vh\n...\n      nLRbwHOoq7hHwg==\n      -----END CERTIFICATE-----\n      -----BEGIN CERTIFICATE-----\n      MIIFYDCCBEigAwIBAgIQQAF3ITfU6UK47naqPGQKtzANBgkqhkiG9w0BAQsFADA/\n      MSQwIgYDVQQKExtEaWdpdGFsIFNpZ25hdHVyZSBUcnVzdCBDby4xFzAVBgNVBAMT\n...\n      Dfvp7OOGAN6dEOM4+qR9sdjoSYKEBpsr6GtPAQw4dy753ec5\n      -----END CERTIFICATE-----\n    privateKey: |\n      -----BEGIN PRIVATE KEY-----\n      MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDL0BJ4P5hBrjIf\n      uDOL6OsB3AvdwTIwCTfpaJOSRi1ZXbxVGXv2f429gqQ4WADxRnLIsmcZtbAyrubO\n...\n      LUBOU4QRP9V6qpS0TrLmIoM=\n      -----END PRIVATE KEY-----\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"publicKey"})," is the public certificate. (content of ",(0,s.jsx)(n.code,{children:".crt"})," file)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"privateKey"})," is the private key. (content of ",(0,s.jsx)(n.code,{children:".key"})," file)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["You should use the full certificate chain for ",(0,s.jsx)(n.code,{children:"publicKey"}),", similar to the main domain ",(0,s.jsx)(n.code,{children:"sslCertificate"}),", to prevent SSL errors when clients connect."]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"For now, self-hosted Appcircle does not support the usage of password-protected private keys for the Testing Distribution custom domains."})}),"\n",(0,s.jsx)(n.h2,{id:"external-services",children:"External Services"}),"\n",(0,s.jsxs)(n.p,{children:["If you are using external services that have self-signed SSL certificates, you will need to add their public certificate to the ",(0,s.jsx)(n.code,{children:"global.yaml"})," file. These external services can be self-hosted git providers like GitLab, Azure Devops Server, Bitbucket, or LDAP servers used for authentication."]}),"\n",(0,s.jsxs)(n.p,{children:["You can add ",(0,s.jsx)(n.strong,{children:"multiple"})," certificates to the ",(0,s.jsx)(n.code,{children:"external.ca"})," section. If you are using multiple services, you will need to add each certificate to this section."]}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsxs)(n.p,{children:["A certificate included in ",(0,s.jsx)(n.code,{children:"external.ca"})," must be in PEM form."]}),(0,s.jsx)(n.p,{children:"A PEM-formatted certificate is human-readable in base64 format, and starts with the lines ----BEGIN CERTIFICATE----."})]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.p,{children:["If your external service has ",(0,s.jsx)(n.strong,{children:"Subordinate CA"})," (sub CA) in certificate chain, it should also be included in ",(0,s.jsx)(n.code,{children:"external.ca"})," along with ",(0,s.jsx)(n.strong,{children:"Root CA"}),"."]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'external:\n  scheme: https\n  mainDomain: ".appcircle.spacetech.com"\n  ca: |\n    -----BEGIN CERTIFICATE-----\n    MIIEvTCCAyWgAwIBAgIQNVqUQw+7fmeXJBAtns5HyjANBgkqhkiG9w0BAQsFADB3\n    MR4wHAYDVQQKExVta2NlcnQgZGV2ZWxvcG1lbnQgQ0ExJjAkBgNVBAsMHW9zYm94\n    ...\n    nLRbwHOoq7hHwg==\n    -----END CERTIFICATE-----\n    -----BEGIN CERTIFICATE-----\n    MIIFYDCCBEigAwIBAgIQQAF3ITfU6UK47naqPGQKtzANBgkqhkiG9w0BAQsFADA/\n    MSQwIgYDVQQKExtEaWdpdGFsIFNpZ25hdHVyZSBUcnVzdCBDby4xFzAVBgNVBAMT\n    ...\n    Dfvp7OOGAN6dEOM4+qR9sdjoSYKEBpsr6GtPAQw4dy753ec5\n    -----END CERTIFICATE-----\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"When editing the yaml file, pay close attention to the indentation level to ensure the file is properly formatted. Wrong indentation will cause runtime issues."})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>c});var s=i(96540);const t={},r=s.createContext(t);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);