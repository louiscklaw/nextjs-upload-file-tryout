"use strict";(self.webpackChunkappcircle_docusaurus=self.webpackChunkappcircle_docusaurus||[]).push([[47171],{74597:(e,n,s)=>{s.d(n,{Ay:()=>o,RM:()=>t});var i=s(74848),r=s(28453);const t=[{value:"Need help?",id:"need-help",level:3}];function c(e){const n={a:"a",h3:"h3",p:"p",...(0,r.R)(),...e.components},{ExternalUrlRef:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ExternalUrlRef",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"need-help",children:"Need help?"}),"\n",(0,i.jsx)(n.p,{children:"Get help from Appcircle's support team, or see how others are using Appcircle by joining our Slack Channel."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://join.slack.com/t/appcircleio/signup",children:(0,i.jsx)(s,{url:"https://join.slack.com/t/appcircleio/signup",title:"Slack",description:"No description available",image:"https://cdn.appcircle.io/docs/assets/appcircle-logo.png"})})})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},75186:(e,n,s)=>{s.d(n,{Ay:()=>o,RM:()=>t});var i=s(74848),r=s(28453);const t=[];function c(e){const n={li:"li",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Congratulations, now your runner is waiting for build jobs. In order to use your self-hosted runner pool;"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Find your app\'s build profile in "Build Profiles"'}),"\n",(0,i.jsx)(n.li,{children:'Click on "Configurations" to open branch config details'}),"\n",(0,i.jsx)(n.li,{children:'Select your runner\'s pool from "Config" tab'}),"\n",(0,i.jsx)(n.li,{children:"Check also other settings for your runner capabilities"}),"\n",(0,i.jsx)(n.li,{children:"Save settings and pool configuration"}),"\n",(0,i.jsxs)(n.li,{children:["Start Build ","\ud83c\udf89"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},4219:(e,n,s)=>{s.d(n,{Ay:()=>o,RM:()=>t});var i=s(74848),r=s(28453);const t=[];function c(e){const n={admonition:"admonition",code:"code",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"You need to install some workflow required build tools once before executing any build pipeline."}),"\n",(0,i.jsx)(n.p,{children:"You can install iOS platform tools, android platform tools or both of them according to your requirements."}),"\n",(0,i.jsx)(n.p,{children:"Below are some example configurations which shows you some sample runner configuration scenarios:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Install only iOS platform tools with default Xcode (15.2.x)"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"./ac-runner install -o ios\n"})}),"\n",(0,i.jsxs)(n.admonition,{type:"danger",children:[(0,i.jsx)(n.p,{children:"If your operating system is macOS 11 (Big Sur), then the default selected Xcode version will not be compatible for your system."}),(0,i.jsxs)(n.p,{children:["Set ",(0,i.jsx)(n.code,{children:"-x"})," argument explicitly with one of the compatible versions. You can select 12.5, 13.0, 13.1 or 13.2 version for Xcode."]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Install only iOS platform tools with Xcode versions 14.3.x and 15.3.x"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"./ac-runner install -o ios -x 14.3,15.3\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Install only android platform tools"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"./ac-runner install -o android\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Install both android and iOS platform tools with Xcode version 15.3.x"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"./ac-runner install -o ios,android -x 15.3.x\n"})}),"\n",(0,i.jsxs)(n.admonition,{type:"caution",children:[(0,i.jsxs)(n.p,{children:["While configuring self-hosted runner, platform argument (",(0,i.jsx)(n.code,{children:"-o"}),") doesn't work as append strategy. Your latest platform argument will be self-hosted runner's ",(0,i.jsx)(n.strong,{children:"final"})," platform."]}),(0,i.jsxs)(n.p,{children:["Let's assume, you installed iOS platform tools at first with ",(0,i.jsx)(n.code,{children:"-o ios"})," and then want to add also android platform in order to build both iOS and android apps."]}),(0,i.jsxs)(n.p,{children:["Using ",(0,i.jsx)(n.code,{children:"-o android"})," in this case will be wrong argument. You must use ",(0,i.jsx)(n.code,{children:"-o ios,android"})," for this purpose."]})]})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},34948:(e,n,s)=>{s.d(n,{Ay:()=>a,RM:()=>c});var i=s(74848),r=s(28453),t=s(69678);const c=[];function o(e){const n={a:"a",admonition:"admonition",code:"code",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Go to your organization's ",(0,i.jsx)(n.strong,{children:"integration"})," settings and generate runner access token."]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/self-hosted-runner-access-token-01.png"}),"\n",(0,i.jsx)(n.p,{children:"Using generated token, register self-hosted runner to your organization with desired name and pool."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"./ac-runner register -t ${Access Token} -n ${Runner Name} -p ${Runner Pool}\n"})}),"\n",(0,i.jsx)(n.p,{children:'Runner name is the text that you identify your self-hosted runner in your organization. You can use any suitable text for runner naming according to your requirements. You will find registered self-hosted runner in "Self-hosted Runners" list with the given name.'}),"\n",(0,i.jsx)(n.p,{children:'Runner pool is the text which identifies the runner pool in your organization. You can use any suitable text for pool naming according to your requirements. You will use given pool name at build profile settings and also see registered self-hosted runner in "Self-hosted Runners" list with the given pool name.'}),"\n",(0,i.jsx)(n.p,{children:'For example, below command is registering runner named "runner1" with pool named "Arm64_pool" to specified organization with using generated runner access token.'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"./ac-runner register -t aat_XVY27uHw7W1GA_cw5Vut0p_WOzHeYeJ2ZkTbqAVE3GX -n runner1 -p Arm64_pool\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For more details on runner and pool, see ",(0,i.jsx)(n.a,{href:"/nextjs-upload-file-tryout/self-hosted-appcircle/self-hosted-runner/configure-runner/manage-pools",children:"Manage Self-hosted Pools"})," and ",(0,i.jsx)(n.a,{href:"/nextjs-upload-file-tryout/self-hosted-appcircle/self-hosted-runner/configure-runner/manage-runners",children:"Manage Self-hosted Runners"})," in docs."]}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsx)(n.p,{children:"Access token is required only for registration process and it can be used for any self-hosted runner, many times until revoked."}),(0,i.jsx)(n.p,{children:"Revoking access token itself is not affecting already registered runners. You can't register new self-hosted runners to organization with revoked token anymore."}),(0,i.jsx)(n.p,{children:"Only one valid access token can be used actively for an organization. There is no hard-limit on token generation and revoke. Acccording to your security requirements, you can revoke and generate new access token anytime you want."})]}),"\n",(0,i.jsx)(n.p,{children:'Once you complete this step, you will see new added runner at "Build > Self-hosted Runners" list.'}),"\n",(0,i.jsxs)(n.p,{children:["It's ",(0,i.jsx)(n.code,{children:"enabled"})," by default but its state should be ",(0,i.jsx)(n.code,{children:"Offline"})," by now."]})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},32803:(e,n,s)=>{s.d(n,{Ay:()=>o,RM:()=>t});var i=s(74848),r=s(28453);const t=[];function c(e){const n={admonition:"admonition",code:"code",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Install and start self-hosted runner service."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"./ac-runner service -c install\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Once you complete this step, its state should be seen as ",(0,i.jsx)(n.code,{children:"Online"}),' in "Self-hosted Runners" list.']}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"You can install and run only one instance of self-hosted runner on a physical machine."})})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},39365:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>x,contentTitle:()=>u,default:()=>g,frontMatter:()=>h,metadata:()=>p,toc:()=>j});var i=s(74848),r=s(28453),t=s(69678),c=s(74597),o=s(34948),a=s(4219),l=s(32803),d=s(75186);const h={title:"Amazon Web Services (AWS)",description:"Learn how to create a self-hosted Appcircle runner instance on Amazon Web Services (AWS).",tags:["self-hosted","self-hosted runner","cloud providers","aws","amazon web services","EC2"],sidebar_position:1},u=void 0,p={id:"self-hosted-appcircle/self-hosted-runner/cloud-providers/aws",title:"Amazon Web Services (AWS)",description:"Learn how to create a self-hosted Appcircle runner instance on Amazon Web Services (AWS).",source:"@site/docs/self-hosted-appcircle/self-hosted-runner/cloud-providers/aws.md",sourceDirName:"self-hosted-appcircle/self-hosted-runner/cloud-providers",slug:"/self-hosted-appcircle/self-hosted-runner/cloud-providers/aws",permalink:"/nextjs-upload-file-tryout/self-hosted-appcircle/self-hosted-runner/cloud-providers/aws",draft:!1,unlisted:!1,editUrl:"https://github.com/appcircleio/appcircle-docusaurus/tree/master/docs/self-hosted-appcircle/self-hosted-runner/cloud-providers/aws.md",tags:[{label:"self-hosted",permalink:"/nextjs-upload-file-tryout/tags/self-hosted"},{label:"self-hosted runner",permalink:"/nextjs-upload-file-tryout/tags/self-hosted-runner"},{label:"cloud providers",permalink:"/nextjs-upload-file-tryout/tags/cloud-providers"},{label:"aws",permalink:"/nextjs-upload-file-tryout/tags/aws"},{label:"amazon web services",permalink:"/nextjs-upload-file-tryout/tags/amazon-web-services"},{label:"EC2",permalink:"/nextjs-upload-file-tryout/tags/ec-2"}],version:"current",sidebarPosition:1,frontMatter:{title:"Amazon Web Services (AWS)",description:"Learn how to create a self-hosted Appcircle runner instance on Amazon Web Services (AWS).",tags:["self-hosted","self-hosted runner","cloud providers","aws","amazon web services","EC2"],sidebar_position:1},sidebar:"mySidebar",previous:{title:"Cloud Providers",permalink:"/nextjs-upload-file-tryout/self-hosted-appcircle/self-hosted-runner/cloud-providers/"},next:{title:"Runner Virtual Machine Setup",permalink:"/nextjs-upload-file-tryout/self-hosted-appcircle/self-hosted-runner/runner-vm-setup"}},x={},j=[{value:"Overview",id:"overview",level:2},{value:"Pre-requirements",id:"pre-requirements",level:2},{value:"Appcircle Requirements",id:"appcircle-requirements",level:3},{value:"Technical Requirements",id:"technical-requirements",level:3},{value:"AWS Account",id:"aws-account",level:4},{value:"Understanding of AWS Services",id:"understanding-of-aws-services",level:4},{value:"1. Networking and Security Configuration",id:"1-networking-and-security-configuration",level:5},{value:"2. SSH Key Pairs for Secure Access",id:"2-ssh-key-pairs-for-secure-access",level:5},{value:"3. MacOS System Configuration",id:"3-macos-system-configuration",level:5},{value:"4. Dedicated Hosts and EC2 Mac Instances",id:"4-dedicated-hosts-and-ec2-mac-instances",level:5},{value:"Creating a Mac Instance for the Appcircle Runner",id:"creating-a-mac-instance-for-the-appcircle-runner",level:2},{value:"Creating a Dedicated Host for EC2 Mac Instance",id:"creating-a-dedicated-host-for-ec2-mac-instance",level:3},{value:"Check and Request the Dedicated Mac Instance Quota",id:"check-and-request-the-dedicated-mac-instance-quota",level:4},{value:"Create the Dedicated Host",id:"create-the-dedicated-host",level:4},{value:"Creating an EC2 Mac Instance on the Dedicated Host",id:"creating-an-ec2-mac-instance-on-the-dedicated-host",level:3},{value:"Configuring the Appcircle Runner Instance",id:"configuring-the-appcircle-runner-instance",level:2},{value:"Connect via SSH",id:"connect-via-ssh",level:3},{value:"Configure Runner",id:"configure-runner",level:3},{value:"Install Latest Package",id:"install-latest-package",level:4},{value:"Register the Runner to the Appcircle server",id:"register-the-runner-to-the-appcircle-server",level:4},...o.RM,{value:"Install the Required Build Tools",id:"install-the-required-build-tools",level:4},...a.RM,{value:"Run the Service",id:"run-the-service",level:4},...l.RM,{value:"Building Applications",id:"building-applications",level:2},...d.RM,...c.RM];function m(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"In this document, you will see how to create a self-hosted Appcircle runner instance on Amazon Web Services (AWS)."}),"\n",(0,i.jsx)(n.p,{children:"By following the steps below, you will create a dedicated host, Sonoma macOS, from the base AMI, install the Appcircle runner, and make it ready to build Android and iOS applications, just like in the Appcircle cloud."}),"\n",(0,i.jsx)(n.h2,{id:"pre-requirements",children:"Pre-requirements"}),"\n",(0,i.jsx)(n.h3,{id:"appcircle-requirements",children:"Appcircle Requirements"}),"\n",(0,i.jsx)(n.p,{children:"You can use a self-hosted Appcircle runner with your self-hosted Appcircle server or Appcircle cloud account."}),"\n",(0,i.jsxs)(n.admonition,{type:"danger",children:[(0,i.jsxs)(n.p,{children:["The only requirement for using self-hosted runners is to be in ",(0,i.jsx)(n.code,{children:"enterprise"})," plan."]}),(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"https://appcircle.io/pricing",children:"pricing"})," and feature comparison table for details."]})]}),"\n",(0,i.jsx)(n.h3,{id:"technical-requirements",children:"Technical Requirements"}),"\n",(0,i.jsx)(n.p,{children:"Before creating an Appcircle runner on AWS, there are a couple of things that you need to handle."}),"\n",(0,i.jsx)(n.h4,{id:"aws-account",children:"AWS Account"}),"\n",(0,i.jsx)(n.p,{children:"You must have an active AWS account with appropriate permissions to launch EC2 instances and work with other related services."}),"\n",(0,i.jsx)(n.h4,{id:"understanding-of-aws-services",children:"Understanding of AWS Services"}),"\n",(0,i.jsx)(n.p,{children:"A basic understanding of Amazon Web Services (AWS) services, particularly EC2 (Elastic Compute Cloud), is beneficial."}),"\n",(0,i.jsx)(n.p,{children:"You should be familiar with instance creation, networking, security groups, and storage configurations."}),"\n",(0,i.jsx)(n.h5,{id:"1-networking-and-security-configuration",children:"1. Networking and Security Configuration"}),"\n",(0,i.jsx)(n.p,{children:"You might need to configure networking aspects such as Virtual Private Cloud (VPC), subnets, route tables, and security groups to properly integrate the instance within the network environment and manage access controls."}),"\n",(0,i.jsx)(n.h5,{id:"2-ssh-key-pairs-for-secure-access",children:"2. SSH Key Pairs for Secure Access"}),"\n",(0,i.jsx)(n.p,{children:"You need an SSH key pair to access to the server that you will create securely."}),"\n",(0,i.jsx)(n.h5,{id:"3-macos-system-configuration",children:"3. MacOS System Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Basic familiarity with macOS system configurations and commands is essential since this document will use macOS commands."}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsx)(n.p,{children:"MacOS is a Unix-like operating system, much like Linux, which means that many of the commands and underlying principles are similar."}),(0,i.jsx)(n.p,{children:"If you have experience with Linux, installing the Appcircle runner on macOS should be a seamless process."})]}),"\n",(0,i.jsx)(n.h5,{id:"4-dedicated-hosts-and-ec2-mac-instances",children:"4. Dedicated Hosts and EC2 Mac Instances"}),"\n",(0,i.jsx)(n.p,{children:"While the process of creating an EC2 Mac instance on AWS differs slightly from creating a Linux instance, the key distinction lies in the requirement of a dedicated host."}),"\n",(0,i.jsxs)(n.p,{children:["After selecting a macOS image during the instance creation process, users must specify the dedicated host they have previously provisioned, as outlined in the AWS ",(0,i.jsx)(n.a,{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-mac-instances.html",children:"documentation"})," for comprehensive guidance."]}),"\n",(0,i.jsx)(n.p,{children:"Furthermore, detailed instructions are provided below on creating a dedicated Mac instance, ensuring you have the necessary resources for seamless operation."}),"\n",(0,i.jsx)(n.p,{children:"However, please make sure that you have a dedicated host service quota before proceeding to create a dedicated host."}),"\n",(0,i.jsxs)(n.p,{children:["For more details about the AWS EC2 Mac instances, you can refer to the ",(0,i.jsx)(n.a,{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-mac-instances.html",children:"documentation"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"creating-a-mac-instance-for-the-appcircle-runner",children:"Creating a Mac Instance for the Appcircle Runner"}),"\n",(0,i.jsx)(n.p,{children:"After you meet all the requirements discussed above, you can follow the steps below to create a Mac instance for the Appcircle runner installation."}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-dedicated-host-for-ec2-mac-instance",children:"Creating a Dedicated Host for EC2 Mac Instance"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Log in to the AWS console with your account."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Select the region from the right upper corner."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsx)(n.p,{children:"If you have a self-hosted Appcircle server in AWS, it's better to deploy the self-hosted Appcircle runner in the same region as the Appcircle server."}),(0,i.jsx)(n.p,{children:"This approach will reduce the latency between two machines."})]}),"\n",(0,i.jsx)(n.h4,{id:"check-and-request-the-dedicated-mac-instance-quota",children:"Check and Request the Dedicated Mac Instance Quota"}),"\n",(0,i.jsx)(n.p,{children:"Before creating the dedicated host instance, you should check the dedicated service quota."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Head to the "Service Quotas" menu.'}),"\n"]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws13-dashboard.png"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Click on the "AWS services". Filter the EC2 services as below, and then click on the "Amazon Elastic Compute Cloud (Amazon EC2)" service.'}),"\n"]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws14-quotas-dashboard.png"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'Filter the services by "dedicated mac2" and select the relevant instance type service quota.'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'In this tutorial, we will use "mac2" hosts.'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws15-dedicated-hosts.png"}),"\n",(0,i.jsxs)(n.p,{children:['If the "applied account-level quota value" is ',(0,i.jsx)(n.code,{children:"0"}),", then you should request an increase as below."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["For your first quota request, you can request ",(0,i.jsx)(n.code,{children:"1"})," quota."]}),"\n"]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws16-request.png"}),"\n",(0,i.jsx)(n.h4,{id:"create-the-dedicated-host",children:"Create the Dedicated Host"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Head to the EC2 menu to create an dedicated instance."}),"\n"]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws1-dashboard.png"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Head to the "Dedicated Hosts" menu and click on the "Allocate Dedicated Host" button.'}),"\n"]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws2-dedicated-host-dashboard.png"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'Enter a dedicated instance name in the "Name tag" field. For example, "Appcircle Dedicated Host".'}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Then you should select the ",(0,i.jsx)(n.strong,{children:"instance family"}),", ",(0,i.jsx)(n.strong,{children:"instance type"})," and the ",(0,i.jsx)(n.strong,{children:"availability zone"}),". For example, ",(0,i.jsx)(n.code,{children:"mac2"})," for the instance family and ",(0,i.jsx)(n.code,{children:"mac2.metal"})," for the instance type."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws3-dedicated-host-launch-1.png"}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsxs)(n.p,{children:["You must select one of the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"mac2"})}),", ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"mac2-m2"})})," or ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"mac2-m2pro"})})," instance families since the Appcircle runner is supported on these instance families."]}),(0,i.jsxs)(n.p,{children:["In the AWS ",(0,i.jsx)(n.a,{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-mac-instances.html",children:"documentation"}),", you can find the underlying infrastructure listed below."]}),(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"EC2 M1 Mac instances (mac2.metal) are built on 2020 Mac mini hardware powered by Apple silicon M1 processors."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"EC2 M2 Mac instances (mac2-m2.metal) are built on 2023 Mac mini hardware powered by Apple silicon M2 processors."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"EC2 M2 Pro Mac instances (mac2-m2pro.metal) are built on 2023 Mac mini hardware powered by Apple silicon M2 Pro processors."}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'Since the Mac instances doesn\'t support "Host maintenance", you must uncheck it.'}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'Click on the "Allocate" button to create your dedicated host.'}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws4-dedicated-host-launch-2.png"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["You can see the created dedicated host on the ",(0,i.jsx)(n.strong,{children:"Dedicated Hosts"})," dashboard."]}),"\n"]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws5-dedicated-host-created.png"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'When you see the state of the dedicated host as "Available", you can continue with creating EC2 Mac instance.'}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["If you have more than one dedicated hosts, make a note of the dedicated ",(0,i.jsx)(n.strong,{children:"Host ID"})," to avoid confusion when creating the EC2 Mac instance."]})}),"\n",(0,i.jsx)(n.h3,{id:"creating-an-ec2-mac-instance-on-the-dedicated-host",children:"Creating an EC2 Mac Instance on the Dedicated Host"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Head to the EC2 menu to create an EC2 Mac instance."}),"\n"]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws1-dashboard.png"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Click on the "Launch Instance" button from the EC2 dashboard.'}),"\n"]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws6-ec2-dashboard.png"}),"\n",(0,i.jsx)(n.p,{children:"You should fill out the required fields as per your needs. Please follow the below steps for a sample instance configuration."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'Enter an instance name in the "Name and Tags" field. For example, "My Appcircle Runner".'}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'In order to select the AMI, click on the "macOS" button. Then select "macOS Sonoma" from the AMI drop-down menu. And for the architecture, select "64-bit (Mac-Arm)".'}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws7-ec2-ami.png"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["We will use the\xa0",(0,i.jsx)(n.code,{children:"mac2.metal"})," instance type for our sample configuration since we have crated a ",(0,i.jsx)(n.code,{children:"mac2.metal"})," dedicated host ",(0,i.jsx)(n.a,{href:"#creating-a-dedicated-host-for-ec2-mac-instance",children:"above"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:["If you have created another type of dedicated host, like ",(0,i.jsx)(n.code,{children:"mac2-m2.metal"})," or ",(0,i.jsx)(n.code,{children:"mac2-m2pro.metal"}),", you should choose them from the menu."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Select an existing key pair or click on the "Create new key pair" button if you don\'t have any on the AWS console.'}),"\n"]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws8-ec2-type.png"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["For the network settings:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"We will use the default VPC created on the form."}),"\n",(0,i.jsxs)(n.li,{children:["Don't allow HTTP and HTTPS traffic from the internet.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The Appcircle runner doesn't require accepting any incoming HTTP(S) requests."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["You can restrict the SSH connection by specifying the source IP addresses.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"SSH is required"})," to access the runner from the command line."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws9-ec2-network.png"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["For the storage, you should select a minimum 300 GB disk for a runner that will build Android and iOS applications with three Xcode versions.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"For each Xcode version you plan to install side by side, you should add 50 GB of disk space, roughly."}),"\n",(0,i.jsxs)(n.li,{children:["In this tutorial, we will install the latest (",(0,i.jsx)(n.em,{children:"at the moment"}),") three Xcode versions as a sample configuration, which are ",(0,i.jsx)(n.code,{children:"15.3"}),", ",(0,i.jsx)(n.code,{children:"15.2"}),", and ",(0,i.jsx)(n.code,{children:"15.1"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws10-ec2-storage.png"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'To select the previously created dedicated host, expand the "Advanced details" settings.'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:['Set the "Tenancy" to ',(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"Dedicated Host"})}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:['Set the "Target host by" to ',(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"Host ID"})}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:['Set the "Tenancy host ID" to the dedicated ',(0,i.jsx)(n.strong,{children:"Host ID"})," of the previously created dedicated host."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws11-ec2-dedicated-instance.png"}),"\n",(0,i.jsxs)(n.p,{children:["Now you're ready to click on the ",(0,i.jsx)(n.strong,{children:"Launch Instance"})," button to create the EC2 Mac instance with the configuration you made."]}),"\n",(0,i.jsxs)(n.p,{children:["You can head to the EC2 ",(0,i.jsx)(n.strong,{children:"Instances"})," page to see if your server is up and running."]}),"\n",(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-aws12-ec2-ready.png"}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsxs)(n.p,{children:["You need to wait until the ",(0,i.jsx)(n.strong,{children:"Instance state"})," of the instance is ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"Running"})})," in order to connect to the instance with SSH."]}),(0,i.jsxs)(n.p,{children:["Generally it takes ~5-10 minutes till the ",(0,i.jsx)(n.strong,{children:"Instance state"})," becomes ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"Running"})})," from ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"Pending"})}),"."]})]}),"\n",(0,i.jsx)(n.h2,{id:"configuring-the-appcircle-runner-instance",children:"Configuring the Appcircle Runner Instance"}),"\n",(0,i.jsx)(n.h3,{id:"connect-via-ssh",children:"Connect via SSH"}),"\n",(0,i.jsx)(n.p,{children:"After you have successfully created an EC2 Mac instance, you can follow the steps below to configure it."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Get the IP address of the instance from EC2 dashboard."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Networking > Networking Details > Public IPv4 address"}),"\n",(0,i.jsx)(n.li,{children:"Or, Instance > Details > Public IPv4 address"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Locate the SSH key pair, especially the private key, that you've created or used while configuring the instance."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Get an SSH connection tool like ",(0,i.jsx)(n.code,{children:"putty"})," on Windows or ",(0,i.jsx)(n.code,{children:"ssh"})," on macOS and Linux to connect to the instance."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ssh"})," command below is for macOS and Linux. The other commands are the same after you connect to the instance."]})}),"\n",(0,i.jsxs)(n.p,{children:["Using ",(0,i.jsx)(n.strong,{children:"private key"})," and ",(0,i.jsx)(n.strong,{children:"IP address"}),", you can connect to the instance with SSH as seen below."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ssh -i "/path/to/your/private/key" ec2-user@ip-address-of-the-instance\n'})}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsxs)(n.p,{children:["The default user for the Sonoma macOS AMI is ",(0,i.jsx)(n.code,{children:"ec2-user"}),". So you should use ",(0,i.jsx)(n.code,{children:"ec2-user"})," while connecting to the newly created EC2 Mac instance."]}),(0,i.jsxs)(n.p,{children:["So, let's assume that your instance IP address is ",(0,i.jsx)(n.code,{children:"3.234.230.124"})," and your private SSH key path is ",(0,i.jsx)(n.code,{children:"/home/spacetech/.ssh/id_rsa"}),"."]}),(0,i.jsx)(n.p,{children:"You can connect to the instance using the below command on macOS or Linux."}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ssh -i "/home/spacetech/.ssh/id_rsa" ec2-user@3.234.230.124\n'})})]}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsx)(n.p,{children:'When you "Create new key pair" while creating the instance, the downloaded private key might cause a permission error when you try to connect to the instance. For instance;'}),(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"... Permissions 0644 for 'MyCICDSSHKey.pem' are too open.\nIt is required that zour private key files are NOT accessible by others.\nThis private key will be ignored. ..."}),"\n"]}),(0,i.jsx)(n.p,{children:"In this case, you need to change the permissions of the private key using the below command before connecting."}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'chmod 600 "/path/to/your/private/key"\n'})}),(0,i.jsx)(n.p,{children:"It will be a one-time-operation that should be done once per private key."})]}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsxs)(n.p,{children:["The SSH command may ask you to add this server to the list of known hosts. You should write ",(0,i.jsx)(n.code,{children:"yes"})," and hit enter."]}),(0,i.jsx)(t.A,{url:"https://cdn.appcircle.io/docs/assets/be-2757-instance-config-ssh-warning.png"})]}),"\n",(0,i.jsx)(n.h3,{id:"configure-runner",children:"Configure Runner"}),"\n",(0,i.jsx)(n.h4,{id:"install-latest-package",children:"Install Latest Package"}),"\n",(0,i.jsx)(n.p,{children:"After you successfully connect to the Appcircle runner instance, you can install the Appcircle runner into it."}),"\n",(0,i.jsx)(n.p,{children:"Change the current working directory to the home directory."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'cd "$HOME"\n'})}),"\n",(0,i.jsx)(n.p,{children:"Download the latest self-hosted runner package."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -O -L https://cdn.appcircle.io/self-hosted/runner/appcircle-runner-osx-arm64-1.6.0.zip\n"})}),"\n",(0,i.jsx)(n.p,{children:"Extract self-hosted runner package."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"unzip -o -u appcircle-runner-osx-arm64-1.6.0.zip\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Change directory into extracted ",(0,i.jsx)(n.code,{children:"appcircle-runner"})," folder for following steps."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd appcircle-runner\n"})}),"\n",(0,i.jsx)(n.h4,{id:"register-the-runner-to-the-appcircle-server",children:"Register the Runner to the Appcircle server"}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsx)(n.p,{children:"By default, the Appcircle runner is configured to connect to the Appcircle cloud. If you are not using the Appcircle server as self-hosted, you can skip this information."}),(0,i.jsxs)(n.p,{children:["If you are using a self-hosted Appcircle server, edit the ",(0,i.jsx)(n.code,{children:"appsettings.json"})," file with your favorite editor."]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"vi appsettings.json\n"})}),(0,i.jsxs)(n.p,{children:["You will see that the ",(0,i.jsx)(n.code,{children:"ASPNETCORE_BASE_API_URL"})," value is pre-defined for the Appcircle cloud. Change it to your Appcircle server API domain without changing the path. For example:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n...\n  "ASPNETCORE_BASE_API_URL": "https://api.appcircle.spacetech.com/build/v1"\n}\n'})})]}),"\n",(0,i.jsxs)(n.p,{children:["Now you need to create a ",(0,i.jsx)(n.strong,{children:"Runner Access Token"})," to register this instance with the Appcircle server."]}),"\n",(0,i.jsx)(o.Ay,{}),"\n",(0,i.jsx)(n.h4,{id:"install-the-required-build-tools",children:"Install the Required Build Tools"}),"\n",(0,i.jsx)(a.Ay,{}),"\n",(0,i.jsxs)(n.p,{children:["For this tutorial, we will install the Android tools and iOS tools with the latest (",(0,i.jsx)(n.em,{children:"at the moment"}),") three stable Xcode versions."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"./ac-runner install -o ios,android -x 15.3,15.2,15.1\n"})}),"\n",(0,i.jsx)(n.h4,{id:"run-the-service",children:"Run the Service"}),"\n",(0,i.jsx)(l.Ay,{}),"\n",(0,i.jsx)(n.h2,{id:"building-applications",children:"Building Applications"}),"\n",(0,i.jsx)(d.Ay,{}),"\n",(0,i.jsxs)(n.p,{children:["For a comprehensive overview of building applications on the Appcircle platform, you can navigate to the ",(0,i.jsx)(n.a,{href:"/build/platform-build-guides",children:"Platform Build Guides"})," page."]}),"\n",(0,i.jsx)(c.Ay,{}),"\n",(0,i.jsxs)(n.p,{children:["Have questions? ",(0,i.jsx)(n.a,{href:"https://appcircle.io/support/",children:"Contact us here."})]})]})}function g(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(m,{...e})}):m(e)}},69678:(e,n,s)=>{s.d(n,{A:()=>r});s(96540);var i=s(74848);function r(e){let{url:n}=e;return(0,i.jsx)("img",{className:"screenshot",src:n})}},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>o});var i=s(96540);const r={},t=i.createContext(r);function c(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);